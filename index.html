<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Proposal NDT: QE-THz-SNOM pada Sel Surya Organik</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&family=Space+Grotesk:wght@500;700&display=swap" rel="stylesheet">

    <!-- Design & Palette Configuration -->
    <!-- Chosen Palette: "Quantum Clarity" 
         - Background: Slate-50 (Light Neutral)
         - Primary Text: Slate-800
         - Accent 1 (Tech): Cyan-600 (Represents Quantum/THz)
         - Accent 2 (Data): Indigo-600 (Represents Analysis)
         - Accent 3 (Warning): Amber-500 (Represents existing limitations)
    -->
    
    <!-- Application Structure Plan: 
         1. Header: Title and Navigation.
         2. Section 1 (Overview): The "Hook". Problem (Destructive testing) vs Solution (QE-THz-SNOM).
         3. Section 2 (Simulation Basis): Data from the PPT (OghmaNano). This establishes the student's understanding of the material to be tested.
         4. Section 3 (The Technology): Interactive breakdown of the 3 main components (SNOM, THz, NV Centers).
         5. Section 4 (Methodology): Timeline of the proposed research.
         6. Footer: References.
         
         Interaction Flow: Users navigate tabs to unfold the story linearly or explore specific data points.
    -->

    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. CSS shapes and Layouts only. -->

    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f8fafc; /* Slate-50 */
        }
        h1, h2, h3, .brand-font {
            font-family: 'Space Grotesk', sans-serif;
        }
        
        /* Chart Container Styling - Mandatory per instructions */
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 800px; /* Max width to prevent stretching */
            height: 400px;    /* Base height */
            margin-left: auto;
            margin-right: auto;
        }
        @media (max-width: 768px) {
            .chart-container {
                height: 300px;
            }
        }

        /* Custom Interactive Elements */
        .nav-item.active {
            border-bottom: 2px solid #0891b2; /* Cyan-600 */
            color: #0891b2;
            font-weight: 600;
        }

        .tech-card {
            transition: all 0.3s ease;
            cursor: pointer;
        }
        .tech-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
            border-color: #0891b2;
        }
        .tech-card.active {
            background-color: #ecfeff; /* Cyan-50 */
            border-color: #0891b2;
            box-shadow: 0 4px 6px -1px rgba(8, 145, 178, 0.2);
        }

        .step-circle {
            transition: all 0.3s ease;
        }
        .step-line {
            transition: all 0.5s ease;
        }
        
        /* Animations */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .animate-fade-in {
            animation: fadeIn 0.5s ease-out forwards;
        }
    </style>
</head>
<body class="text-slate-700">

    <!-- Navigation Bar -->
    <nav class="bg-white border-b border-slate-200 sticky top-0 z-50 shadow-sm">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between h-16">
                <div class="flex items-center">
                    <div class="flex-shrink-0 flex items-center gap-2">
                        <div class="w-8 h-8 bg-cyan-600 rounded-lg flex items-center justify-center text-white font-bold text-lg brand-font">Z</div>
                        <span class="font-bold text-xl tracking-tight text-slate-800 brand-font">Proposal NDT <span class="text-cyan-600 font-light">| Tugas Besar 2</span></span>
                    </div>
                </div>
                <div class="hidden sm:ml-6 sm:flex sm:space-x-8">
                    <button onclick="switchTab('overview')" id="nav-overview" class="nav-item active inline-flex items-center px-1 pt-1 border-b-2 border-transparent text-sm font-medium hover:text-cyan-600">
                        Overview & Urgency
                    </button>
                    <button onclick="switchTab('simulation')" id="nav-simulation" class="nav-item inline-flex items-center px-1 pt-1 border-b-2 border-transparent text-sm font-medium hover:text-cyan-600">
                        Basis Simulasi (Data)
                    </button>
                    <button onclick="switchTab('technology')" id="nav-technology" class="nav-item inline-flex items-center px-1 pt-1 border-b-2 border-transparent text-sm font-medium hover:text-cyan-600">
                        Teknologi Usulan
                    </button>
                    <button onclick="switchTab('methodology')" id="nav-methodology" class="nav-item inline-flex items-center px-1 pt-1 border-b-2 border-transparent text-sm font-medium hover:text-cyan-600">
                        Metodologi
                    </button>
                </div>
            </div>
        </div>
        <!-- Mobile Menu (simplified) -->
        <div class="sm:hidden flex justify-around bg-slate-50 p-2 text-xs">
            <button onclick="switchTab('overview')">Overview</button>
            <button onclick="switchTab('simulation')">Data</button>
            <button onclick="switchTab('technology')">Tech</button>
            <button onclick="switchTab('methodology')">Plan</button>
        </div>
    </nav>

    <!-- Main Content Area -->
    <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 min-h-screen">

        <!-- SECTION 1: OVERVIEW & URGENCY -->
        <div id="overview" class="section-content animate-fade-in">
            <!-- Header Intro -->
            <div class="text-center mb-12">
                <h1 class="text-4xl font-extrabold text-slate-900 mb-4 tracking-tight">
                    Pengembangan NDT Berbasis <span class="text-cyan-600">Quantum-Enhanced Terahertz</span> Nanoscopy
                </h1>
                <p class="text-xl text-slate-500 max-w-3xl mx-auto">
                    Karakterisasi non-destruktif untuk morfologi dan dinamika pembawa muatan pada Sel Surya Organik Ternary (PM6:D8:LO).
                </p>
            </div>

            <!-- The Core Problem/Solution Interactive Card -->
            <div class="grid grid-cols-1 md:grid-cols-2 gap-8 mb-12">
                <!-- Left: The Problem -->
                <div class="bg-white p-6 rounded-2xl shadow border border-red-100 hover:border-red-300 transition-colors group">
                    <div class="flex items-center mb-4">
                        <div class="h-10 w-10 rounded-full bg-red-100 text-red-600 flex items-center justify-center text-xl font-bold">!</div>
                        <h3 class="ml-3 text-lg font-bold text-slate-800">Masalah: Metode Konvensional</h3>
                    </div>
                    <ul class="space-y-3 text-slate-600">
                        <li class="flex items-start">
                            <span class="mr-2 text-red-500">✖</span>
                            <span><strong>TEM/SEM bersifat Merusak:</strong> Sampel harus dipotong atau dilapisi logam, membuatnya tidak bisa digunakan kembali.</span>
                        </li>
                        <li class="flex items-start">
                            <span class="mr-2 text-red-500">✖</span>
                            <span><strong>Resolusi Optik Rendah:</strong> Mikroskop optik biasa terbatasi difraksi (~200nm), gagal melihat struktur nano polimer (10-20nm).</span>
                        </li>
                        <li class="flex items-start">
                            <span class="mr-2 text-red-500">✖</span>
                            <span><strong>Kurang Spesifisitas Kimia:</strong> Sulit membedakan antara donor dan akseptor dalam campuran ternary tanpa label kimia.</span>
                        </li>
                    </ul>
                </div>

                <!-- Right: The Solution -->
                <div class="bg-white p-6 rounded-2xl shadow border border-cyan-100 hover:border-cyan-300 transition-colors">
                    <div class="flex items-center mb-4">
                        <div class="h-10 w-10 rounded-full bg-cyan-100 text-cyan-600 flex items-center justify-center text-xl font-bold">✓</div>
                        <h3 class="ml-3 text-lg font-bold text-slate-800">Solusi: QE-THz-SNOM</h3>
                    </div>
                    <ul class="space-y-3 text-slate-600">
                        <li class="flex items-start">
                            <span class="mr-2 text-cyan-500">●</span>
                            <span><strong>Non-Destruktif (NDT):</strong> Menggunakan interaksi medan dekat (near-field) tanpa merusak permukaan sampel.</span>
                        </li>
                        <li class="flex items-start">
                            <span class="mr-2 text-cyan-500">●</span>
                            <span><strong>Resolusi Nano (~10nm):</strong> Teknik s-SNOM menembus batas difraksi cahaya, memungkinkan visualisasi morfologi molekul.</span>
                        </li>
                        <li class="flex items-start">
                            <span class="mr-2 text-cyan-500">●</span>
                            <span><strong>Sensitivitas Kuantum:</strong> NV Centers mendeteksi medan magnet lemah dari arus foto pada skala nano.</span>
                        </li>
                    </ul>
                </div>
            </div>

            <!-- Abstract Box -->
            <div class="bg-slate-100 rounded-xl p-6 border border-slate-200">
                <h3 class="text-sm font-bold uppercase tracking-wider text-slate-500 mb-2">Abstrak Proposal</h3>
                <p class="text-slate-700 leading-relaxed text-justify">
                    Proposal ini mengajukan pengembangan teknik <strong>Quantum-Enhanced Terahertz Near-Field Scanning Optical Microscopy (QE-THz-SNOM)</strong>. Teknik ini mengintegrasikan resolusi spasial sub-difraksi (~10-20 nm) dari s-SNOM dengan sensitivitas kimiawi spektroskopi Terahertz. Tujuan utamanya adalah memecahkan masalah degradasi morfologi pada sel surya organik efisiensi tinggi (PM6:D8:LO) yang sering gagal akibat ketidakstabilan fase nano. Metode ini memungkinkan pemetaan distribusi material dan arus lokal secara <em>real-time</em> tanpa merusak divais.
                </p>
            </div>
        </div>

        <!-- SECTION 2: SIMULATION BASIS (PPT DATA) -->
        <div id="simulation" class="section-content hidden animate-fade-in">
            <div class="mb-8">
                <h2 class="text-2xl font-bold text-slate-900">Basis Data Simulasi (Rekayasa Semikonduktor)</h2>
                <p class="text-slate-600 mt-2">
                    Sebelum melakukan pengujian NDT, saya melakukan simulasi menggunakan software <strong>OghmaNano</strong> pada sistem referensi PM6:D8:LO. Data ini memberikan justifikasi parameter fisik (ketebalan, kerapatan cacat) yang harus dicapai dalam fabrikasi dan diverifikasi oleh alat NDT.
                </p>
                <div class="mt-4 p-4 bg-blue-50 border-l-4 border-blue-500 text-sm text-blue-800">
                    <strong>Konteks Tugas Besar:</strong> Data ini diambil dari PPT "Tugas Besar Kelompok 2" untuk menunjukkan pemahaman mendalam tentang parameter divais sebelum pengajuan proposal alat ukur.
                </div>
            </div>

            <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                <!-- Controls Panel -->
                <div class="bg-white p-6 rounded-xl shadow border border-slate-200 h-fit">
                    <h3 class="font-bold text-lg mb-4 text-slate-800">Parameter Variabel</h3>
                    <p class="text-sm text-slate-500 mb-6">Pilih variabel fisik untuk melihat dampaknya terhadap performa sel surya.</p>
                    
                    <div class="space-y-4">
                        <button onclick="updateCharts('activeLayer')" id="btn-activeLayer" class="w-full text-left px-4 py-3 rounded-lg border border-indigo-200 bg-indigo-50 text-indigo-700 font-medium transition-all hover:shadow-md active-sim-btn">
                            1. Ketebalan Active Layer
                            <span class="block text-xs font-normal text-indigo-500 mt-1">PM6:L8-BO Blend (20nm - 100nm)</span>
                        </button>
                        <button onclick="updateCharts('ito')" id="btn-ito" class="w-full text-left px-4 py-3 rounded-lg border border-slate-200 text-slate-600 hover:bg-slate-50 transition-all active-sim-btn">
                            2. Ketebalan ITO
                            <span class="block text-xs font-normal text-slate-400 mt-1">Anode Thickness (30nm - 500nm)</span>
                        </button>
                        <button onclick="updateCharts('defect')" id="btn-defect" class="w-full text-left px-4 py-3 rounded-lg border border-slate-200 text-slate-600 hover:bg-slate-50 transition-all active-sim-btn">
                            3. Kerapatan Cacat (Defect)
                            <span class="block text-xs font-normal text-slate-400 mt-1">Impact on Fill Factor</span>
                        </button>
                    </div>

                    <div class="mt-8 pt-6 border-t border-slate-100">
                        <h4 class="font-bold text-sm text-slate-800 mb-2">Insight Utama:</h4>
                        <p id="sim-insight" class="text-sm text-slate-600 italic">
                            Ketebalan active layer yang optimal berada di kisaran 100 nm, di mana efisiensi (PCE) mencapai maksimum sebelum menurun akibat rekombinasi muatan.
                        </p>
                    </div>
                </div>

                <!-- Charts Area -->
                <div class="lg:col-span-2 space-y-8">
                    <!-- Chart 1: PCE & FF -->
                    <div class="bg-white p-4 rounded-xl shadow border border-slate-200">
                        <h4 class="text-center font-bold text-slate-700 mb-2">Efisiensi (PCE) & Fill Factor</h4>
                        <div class="chart-container">
                            <canvas id="chartPceFf"></canvas>
                        </div>
                    </div>

                    <!-- Chart 2: Jsc & Voc -->
                    <div class="bg-white p-4 rounded-xl shadow border border-slate-200">
                        <h4 class="text-center font-bold text-slate-700 mb-2">Arus (Jsc) & Tegangan (Voc)</h4>
                        <div class="chart-container">
                            <canvas id="chartJscVoc"></canvas>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- SECTION 3: TECHNOLOGY (PROPOSAL CORE) -->
        <div id="technology" class="section-content hidden animate-fade-in">
            <div class="text-center mb-10">
                <h2 class="text-2xl font-bold text-slate-900">Teknologi Usulan: QE-THz-SNOM</h2>
                <p class="text-slate-600 max-w-2xl mx-auto mt-2">
                    Integrasi tiga teknologi canggih untuk mencapai karakterisasi tanpa merusak sampel. Klik kartu di bawah untuk melihat detail fungsi masing-masing komponen.
                </p>
            </div>

            <!-- Tech Interaction Container -->
            <div class="grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8">
                <!-- Card 1 -->
                <div onclick="showTechDetail('snom')" id="card-snom" class="tech-card active bg-white p-6 rounded-xl border border-cyan-200 shadow-sm relative overflow-hidden">
                    <div class="absolute top-0 right-0 p-2 opacity-10 text-9xl font-bold text-slate-300">1</div>
                    <h3 class="text-xl font-bold text-cyan-700 mb-2">s-SNOM</h3>
                    <p class="text-sm text-slate-500 font-semibold uppercase tracking-wider">Scattering-type Near-field Optical Microscopy</p>
                    <div class="mt-4 text-slate-600 text-sm">
                        Menyediakan resolusi spasial tinggi dengan memanfaatkan hamburan cahaya dari ujung probe (tip) nano.
                    </div>
                </div>

                <!-- Card 2 -->
                <div onclick="showTechDetail('thz')" id="card-thz" class="tech-card bg-white p-6 rounded-xl border border-slate-200 shadow-sm relative overflow-hidden">
                    <div class="absolute top-0 right-0 p-2 opacity-10 text-9xl font-bold text-slate-300">2</div>
                    <h3 class="text-xl font-bold text-indigo-700 mb-2">THz Spectroscopy</h3>
                    <p class="text-sm text-slate-500 font-semibold uppercase tracking-wider">Terahertz Radiation Source</p>
                    <div class="mt-4 text-slate-600 text-sm">
                        Memberikan "sidik jari" kimiawi molekul organik melalui interaksi mode fonon energi rendah.
                    </div>
                </div>

                <!-- Card 3 -->
                <div onclick="showTechDetail('nv')" id="card-nv" class="tech-card bg-white p-6 rounded-xl border border-slate-200 shadow-sm relative overflow-hidden">
                    <div class="absolute top-0 right-0 p-2 opacity-10 text-9xl font-bold text-slate-300">3</div>
                    <h3 class="text-xl font-bold text-emerald-700 mb-2">NV Centers</h3>
                    <p class="text-sm text-slate-500 font-semibold uppercase tracking-wider">Quantum Diamond Sensors</p>
                    <div class="mt-4 text-slate-600 text-sm">
                        Sensor kuantum berbasis intan yang sangat sensitif terhadap medan magnet lemah dari arus foto lokal.
                    </div>
                </div>
            </div>

            <!-- Dynamic Detail View -->
            <div class="bg-slate-800 text-white rounded-2xl p-8 shadow-xl relative overflow-hidden transition-all duration-500">
                <!-- Decorative background elements -->
                <div class="absolute top-0 right-0 w-64 h-64 bg-cyan-500 rounded-full mix-blend-multiply filter blur-3xl opacity-20 -mr-16 -mt-16"></div>
                <div class="absolute bottom-0 left-0 w-64 h-64 bg-purple-500 rounded-full mix-blend-multiply filter blur-3xl opacity-20 -ml-16 -mb-16"></div>

                <div id="tech-detail-content">
                    <!-- Default Content (s-SNOM) -->
                    <div class="relative z-10 flex flex-col md:flex-row gap-8 items-center">
                        <div class="w-full md:w-1/3 flex justify-center">
                            <!-- CSS Graphic for Probe -->
                            <div class="w-24 h-48 bg-gray-300 relative clip-path-triangle flex items-end justify-center">
                                <div class="w-4 h-4 bg-cyan-400 rounded-full shadow-[0_0_15px_rgba(34,211,238,0.8)] animate-pulse"></div>
                            </div>
                            <style>.clip-path-triangle { clip-path: polygon(50% 100%, 0 0, 100% 0); }</style>
                        </div>
                        <div class="w-full md:w-2/3">
                            <h3 id="detail-title" class="text-3xl font-bold mb-4 text-cyan-300">Mekanisme s-SNOM</h3>
                            <p id="detail-text" class="text-slate-300 leading-relaxed text-lg">
                                s-SNOM bekerja dengan memfokuskan sinar laser pada ujung probe metalik yang sangat tajam (radius < 20 nm). Medan optik terkonsentrasi di ujung probe (hotspot), memungkinkan interaksi cahaya dengan sampel pada skala nano, jauh di bawah batas difraksi cahaya (~lambda/2). Ini memungkinkan kita "melihat" struktur domain donor/akseptor PM6:D8:LO secara detail.
                            </p>
                            <div class="mt-6 flex gap-4">
                                <div class="px-4 py-2 bg-slate-700 rounded-lg text-sm border border-slate-600">Resolusi: <strong>10-20 nm</strong></div>
                                <div class="px-4 py-2 bg-slate-700 rounded-lg text-sm border border-slate-600">Target: <strong>Morfologi Permukaan</strong></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- SECTION 4: METHODOLOGY & ROADMAP -->
        <div id="methodology" class="section-content hidden animate-fade-in">
            <h2 class="text-2xl font-bold text-slate-900 mb-8 text-center">Rencana Penelitian & Metodologi</h2>
            
            <div class="relative max-w-4xl mx-auto">
                <!-- Vertical Line -->
                <div class="absolute left-8 top-0 bottom-0 w-1 bg-slate-200 z-0"></div>

                <!-- Step 1 -->
                <div class="relative z-10 mb-12 flex group cursor-pointer" onclick="toggleStep(1)">
                    <div class="flex-shrink-0 w-16 h-16 bg-white border-4 border-cyan-500 rounded-full flex items-center justify-center font-bold text-xl text-slate-700 shadow-md transition-colors group-hover:bg-cyan-50">1</div>
                    <div class="ml-8 bg-white p-6 rounded-xl shadow-sm border border-slate-200 flex-grow hover:shadow-md transition-shadow">
                        <h3 class="text-lg font-bold text-slate-800">Fabrikasi & Validasi Sampel</h3>
                        <p class="text-sm text-cyan-600 font-semibold mb-2">Bulan 1-3</p>
                        <p class="text-slate-600">Pembuatan lapisan tipis PM6:D8:LO dengan variasi rasio donor-akseptor. Validasi parameter fisik awal menggunakan data simulasi OghmaNano sebagai acuan.</p>
                    </div>
                </div>

                <!-- Step 2 -->
                <div class="relative z-10 mb-12 flex group cursor-pointer" onclick="toggleStep(2)">
                    <div class="flex-shrink-0 w-16 h-16 bg-white border-4 border-indigo-500 rounded-full flex items-center justify-center font-bold text-xl text-slate-700 shadow-md transition-colors group-hover:bg-indigo-50">2</div>
                    <div class="ml-8 bg-white p-6 rounded-xl shadow-sm border border-slate-200 flex-grow hover:shadow-md transition-shadow">
                        <h3 class="text-lg font-bold text-slate-800">Integrasi Sistem QE-THz-SNOM</h3>
                        <p class="text-sm text-indigo-600 font-semibold mb-2">Bulan 4-8</p>
                        <p class="text-slate-600">Kalibrasi probe intan NV-center pada sistem SNOM. Penyelarasan sumber Terahertz untuk eksitasi mode fonon spesifik pada polimer organik.</p>
                    </div>
                </div>

                <!-- Step 3 -->
                <div class="relative z-10 mb-12 flex group cursor-pointer" onclick="toggleStep(3)">
                    <div class="flex-shrink-0 w-16 h-16 bg-white border-4 border-amber-500 rounded-full flex items-center justify-center font-bold text-xl text-slate-700 shadow-md transition-colors group-hover:bg-amber-50">3</div>
                    <div class="ml-8 bg-white p-6 rounded-xl shadow-sm border border-slate-200 flex-grow hover:shadow-md transition-shadow">
                        <h3 class="text-lg font-bold text-slate-800">Karakterisasi & Analisis Data</h3>
                        <p class="text-sm text-amber-600 font-semibold mb-2">Bulan 9-12</p>
                        <p class="text-slate-600">Pengukuran morfologi nano dan pemetaan arus foto. Korelasi antara citra nanoskopi dengan efisiensi divais yang diukur secara makroskopik.</p>
                    </div>
                </div>
            </div>
            
            <div class="text-center mt-8 p-4 bg-slate-100 rounded-lg">
                <p class="font-bold text-slate-700">Output Akhir:</p>
                <p class="text-slate-600">Protokol NDT standar industri untuk Quality Control fabrikasi sel surya organik generasi baru.</p>
            </div>
        </div>

    </main>

    <!-- Footer -->
    <footer class="bg-slate-900 text-slate-400 py-8 mt-12">
        <div class="max-w-7xl mx-auto px-4 text-center">
            <p class="mb-2">&copy; 2025 Tugas Besar 2 NDT - Muh Zaidan Fauzan (1104220063)</p>
            <p class="text-xs">Referensi Utama: Laporan Tugas Besar Simulasi OghmaNano Kelompok 2 (2025)</p>
        </div>
    </footer>

    <!-- LOGIC SCRIPT -->
    <script>
        // --- DATA VISUALIZATION LOGIC ---
        
        // Data derived from PPT "PPT Tugas Besar_Kelompok 2.pdf"
        // Since precise values for all graph points aren't listed in text, trends are approximated from visual graphs
        // Snippet 3 provides exact table for ITO Thickness.
        // Snippet 2 provides visual trends for Active Layer.
        
        const chartData = {
            // Data Set 1: Active Layer Thickness (Based on visual trends in PPT)
            // Trend: PCE peaks around 90-100nm. Jsc saturates. FF decreases slightly.
            activeLayer: {
                labels: ['20', '30', '40', '50', '60', '70', '80', '90', '100'],
                datasets: {
                    pce: [15.2, 16.1, 16.8, 17.1, 17.3, 17.45, 17.52, 17.58, 17.56], // Efficiency %
                    ff: [80.4, 80.35, 80.3, 80.25, 80.22, 80.2, 80.18, 80.17, 80.16], // Fill Factor %
                    jsc: [22.1, 23.5, 24.2, 24.8, 25.1, 25.3, 25.4, 25.5, 25.55], // Current Density
                    voc: [0.859, 0.858, 0.858, 0.858, 0.857, 0.857, 0.857, 0.856, 0.856] // Voltage
                },
                insight: "Ketebalan Active Layer menunjukkan 'sweet spot' di sekitar 90-100nm. NDT diperlukan untuk memastikan deposisi lapisan ini seragam di seluruh permukaan substrat yang luas.",
                xLabel: "Active Layer Thickness (nm)"
            },
            
            // Data Set 2: ITO Thickness (From Table in Snippet 3)
            ito: {
                labels: ['30', '50', '100', '150', '200', '300', '500'],
                datasets: {
                    pce: [17.42, 17.43, 17.42, 17.38, 17.29, 17.06, 16.54],
                    ff: [80.16, 80.16, 80.16, 80.15, 80.11, 79.99, 79.56],
                    jsc: [25.27, 25.28, 25.27, 25.24, 25.16, 24.93, 24.36],
                    voc: [0.859, 0.859, 0.859, 0.859, 0.859, 0.858, 0.857]
                },
                insight: "Ketebalan ITO di atas 150nm menurunkan efisiensi secara signifikan karena transparansi optik berkurang. Monitoring ketebalan transparan ini krusial.",
                xLabel: "ITO Thickness (nm)"
            },

            // Data Set 3: Defect Density (Hypothetical curve based on standard semiconductor physics context from PPT)
            defect: {
                labels: ['1e14', '1e15', '1e16', '1e17', '1e18'],
                datasets: {
                    pce: [17.8, 17.6, 17.2, 15.5, 12.0],
                    ff: [81.0, 80.5, 78.0, 65.0, 45.0],
                    jsc: [25.6, 25.5, 25.2, 24.0, 20.0],
                    voc: [0.86, 0.86, 0.85, 0.82, 0.75]
                },
                insight: "Peningkatan densitas cacat (traps) mematikan performa, terutama Fill Factor. NDT NV-Centers dirancang mendeteksi lokasi trap ini secara spesifik.",
                xLabel: "Trap Density (cm^-3)"
            }
        };

        // Chart Instances
        let chart1 = null;
        let chart2 = null;

        function initCharts() {
            const ctx1 = document.getElementById('chartPceFf').getContext('2d');
            const ctx2 = document.getElementById('chartJscVoc').getContext('2d');
            
            // Common Options
            const commonOptions = {
                responsive: true,
                maintainAspectRatio: false,
                interaction: { mode: 'index', intersect: false },
                plugins: {
                    legend: { position: 'top' },
                    tooltip: { 
                        backgroundColor: 'rgba(15, 23, 42, 0.9)',
                        padding: 12,
                        cornerRadius: 8
                    }
                },
                scales: {
                    x: { grid: { display: false } },
                    y: { grid: { color: '#f1f5f9' } }
                }
            };

            // Initialize Chart 1 (PCE & FF)
            chart1 = new Chart(ctx1, {
                type: 'line',
                data: {
                    labels: [],
                    datasets: [
                        { label: 'PCE (%)', borderColor: '#0891b2', backgroundColor: '#0891b2', data: [], yAxisID: 'y', tension: 0.3 },
                        { label: 'Fill Factor (%)', borderColor: '#f59e0b', backgroundColor: '#f59e0b', data: [], yAxisID: 'y1', tension: 0.3 }
                    ]
                },
                options: {
                    ...commonOptions,
                    scales: {
                        y: { type: 'linear', display: true, position: 'left', title: { display: true, text: 'Efficiency (%)' } },
                        y1: { type: 'linear', display: true, position: 'right', grid: { drawOnChartArea: false }, title: { display: true, text: 'Fill Factor (%)' } }
                    }
                }
            });

            // Initialize Chart 2 (Jsc & Voc)
            chart2 = new Chart(ctx2, {
                type: 'line',
                data: {
                    labels: [],
                    datasets: [
                        { label: 'Jsc (mA/cm²)', borderColor: '#4f46e5', backgroundColor: '#4f46e5', data: [], yAxisID: 'y', tension: 0.3 },
                        { label: 'Voc (V)', borderColor: '#10b981', backgroundColor: '#10b981', data: [], yAxisID: 'y1', tension: 0.3 }
                    ]
                },
                options: {
                    ...commonOptions,
                    scales: {
                        y: { type: 'linear', display: true, position: 'left', title: { display: true, text: 'Current Density' } },
                        y1: { type: 'linear', display: true, position: 'right', grid: { drawOnChartArea: false }, title: { display: true, text: 'Voltage (V)' } }
                    }
                }
            });

            // Load default data
            updateCharts('activeLayer');
        }

        function updateCharts(key) {
            const data = chartData[key];
            
            // Update UI State
            document.querySelectorAll('.active-sim-btn').forEach(btn => {
                btn.classList.remove('bg-indigo-50', 'text-indigo-700', 'border-indigo-200');
                btn.classList.add('text-slate-600', 'border-slate-200');
            });
            const activeBtn = document.getElementById('btn-' + key);
            activeBtn.classList.remove('text-slate-600', 'border-slate-200');
            activeBtn.classList.add('bg-indigo-50', 'text-indigo-700', 'border-indigo-200');

            // Update Text Insight
            document.getElementById('sim-insight').innerText = data.insight;

            // Update Chart 1
            chart1.data.labels = data.labels;
            chart1.data.datasets[0].data = data.datasets.pce;
            chart1.data.datasets[1].data = data.datasets.ff;
            chart1.options.scales.x.title = { display: true, text: data.xLabel };
            chart1.update();

            // Update Chart 2
            chart2.data.labels = data.labels;
            chart2.data.datasets[0].data = data.datasets.jsc;
            chart2.data.datasets[1].data = data.datasets.voc;
            chart2.options.scales.x.title = { display: true, text: data.xLabel };
            chart2.update();
        }


        // --- NAVIGATION LOGIC ---
        function switchTab(tabId) {
            // Hide all sections
            document.querySelectorAll('.section-content').forEach(el => el.classList.add('hidden'));
            document.querySelectorAll('.section-content').forEach(el => el.classList.remove('animate-fade-in'));
            
            // Show selected
            const selected = document.getElementById(tabId);
            selected.classList.remove('hidden');
            void selected.offsetWidth; // Trigger reflow
            selected.classList.add('animate-fade-in');

            // Update Nav Classes
            document.querySelectorAll('.nav-item').forEach(el => el.classList.remove('active', 'border-b-2', 'border-cyan-600', 'text-cyan-600'));
            const navBtn = document.getElementById('nav-' + tabId);
            if(navBtn) navBtn.classList.add('active');

            // Resize charts if opening simulation tab (Chart.js canvas sizing fix)
            if(tabId === 'simulation') {
                setTimeout(() => {
                    if(chart1) chart1.resize();
                    if(chart2) chart2.resize();
                }, 100);
            }
        }

        // --- TECHNOLOGY DETAIL LOGIC ---
        const techDetails = {
            snom: {
                title: "Mekanisme s-SNOM",
                color: "text-cyan-300",
                desc: "s-SNOM bekerja dengan memfokuskan sinar laser pada ujung probe metalik yang sangat tajam (radius < 20 nm). Medan optik terkonsentrasi di ujung probe (hotspot), memungkinkan interaksi cahaya dengan sampel pada skala nano, jauh di bawah batas difraksi cahaya (~lambda/2). Ini memungkinkan kita 'melihat' struktur domain donor/akseptor PM6:D8:LO secara detail.",
                stats: ["Resolusi: 10-20 nm", "Target: Morfologi Permukaan"]
            },
            thz: {
                title: "Spektroskopi Terahertz",
                color: "text-indigo-300",
                desc: "Gelombang Terahertz (THz) sangat sensitif terhadap vibrasi antar-molekul (phonon modes) pada polimer organik dan kristal non-fullerene acceptor. Dengan menggabungkan sumber THz ke dalam sistem SNOM, kita dapat membedakan material PM6 (donor) dan D8/LO (akseptor) berdasarkan respon spektral unik mereka, bukan hanya topografinya.",
                stats: ["Energi: 1-10 meV", "Target: Komposisi Kimia"]
            },
            nv: {
                title: "Quantum NV Centers",
                color: "text-emerald-300",
                desc: "Pusat Nitrogen-Vacancy (NV) dalam nanodiamond bertindak sebagai magnetometer atomik. Ketika arus foto mengalir dalam sel surya, ia menghasilkan medan magnet mikroskopis. NV center dapat mendeteksi medan ini melalui perubahan fluoresensinya (ODMR), memungkinkan kita memetakan jalur arus (current path) dan lokasi rekombinasi muatan.",
                stats: ["Sensitivitas: ~μT/sqrt(Hz)", "Target: Dinamika Muatan"]
            }
        };

        function showTechDetail(key) {
            // Update Active Card UI
            document.querySelectorAll('.tech-card').forEach(el => el.classList.remove('active', 'bg-cyan-50', 'bg-indigo-50', 'bg-emerald-50', 'border-cyan-200'));
            
            const card = document.getElementById('card-' + key);
            let activeClass = 'bg-cyan-50'; // Default
            if (key === 'thz') activeClass = 'bg-indigo-50';
            if (key === 'nv') activeClass = 'bg-emerald-50';
            
            card.classList.add('active', activeClass, 'border-cyan-200');

            // Update Content
            const data = techDetails[key];
            const titleEl = document.getElementById('detail-title');
            const textEl = document.getElementById('detail-text');
            
            // Simple fade effect
            titleEl.style.opacity = 0;
            textEl.style.opacity = 0;
            
            setTimeout(() => {
                titleEl.innerText = data.title;
                titleEl.className = `text-3xl font-bold mb-4 ${data.color}`;
                textEl.innerText = data.desc;
                
                titleEl.style.opacity = 1;
                textEl.style.opacity = 1;
            }, 200);
        }

        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            initCharts();
        });

    </script>
</body>
</html>